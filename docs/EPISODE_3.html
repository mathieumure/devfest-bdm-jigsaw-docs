<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Episode III - La revanche des Sith Maven | Star Jigsaw - La guerre des modules</title>
    <meta name="description" content="Hand&#39;s on Jigsaw @ Devfest">
    
    
    <link rel="preload" href="/devfest-bdm-jigsaw-docs/assets/css/0.styles.85035bb6.css" as="style"><link rel="preload" href="/devfest-bdm-jigsaw-docs/assets/js/app.cd2565ce.js" as="script"><link rel="preload" href="/devfest-bdm-jigsaw-docs/assets/js/7.bf2f6254.js" as="script"><link rel="prefetch" href="/devfest-bdm-jigsaw-docs/assets/js/2.b0ee0870.js"><link rel="prefetch" href="/devfest-bdm-jigsaw-docs/assets/js/3.8883d706.js"><link rel="prefetch" href="/devfest-bdm-jigsaw-docs/assets/js/4.86748f1f.js"><link rel="prefetch" href="/devfest-bdm-jigsaw-docs/assets/js/5.67d0e9b4.js"><link rel="prefetch" href="/devfest-bdm-jigsaw-docs/assets/js/6.ffb795db.js"><link rel="prefetch" href="/devfest-bdm-jigsaw-docs/assets/js/8.d678cee0.js"><link rel="prefetch" href="/devfest-bdm-jigsaw-docs/assets/js/9.7b3578f7.js"><link rel="prefetch" href="/devfest-bdm-jigsaw-docs/assets/js/10.dee26935.js"><link rel="prefetch" href="/devfest-bdm-jigsaw-docs/assets/js/11.75643d00.js">
    <link rel="stylesheet" href="/devfest-bdm-jigsaw-docs/assets/css/0.styles.85035bb6.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/devfest-bdm-jigsaw-docs/" class="home-link router-link-active"><!----> <span class="site-name">Star Jigsaw - La guerre des modules</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/devfest-bdm-jigsaw-docs/C3P0_HELP.html" class="nav-link">C3P0 Help</a></div><div class="nav-item"><a href="https://github.com/mathieumure/devfest-bdm-jigsaw-webapp" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Frontend
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/louiznk/hands-on-jigsaw-bdm" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/devfest-bdm-jigsaw-docs/C3P0_HELP.html" class="nav-link">C3P0 Help</a></div><div class="nav-item"><a href="https://github.com/mathieumure/devfest-bdm-jigsaw-webapp" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Frontend
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/louiznk/hands-on-jigsaw-bdm" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><a href="/devfest-bdm-jigsaw-docs/" class="sidebar-link">A long time ago in a galaxy far far away...</a></li><li><a href="/devfest-bdm-jigsaw-docs/EPISODE_1.html" class="sidebar-link">Episode I - La Menace de la configuration</a></li><li><a href="/devfest-bdm-jigsaw-docs/EPISODE_2.html" class="sidebar-link">Episode II - Le guerre du Hello World</a></li><li><a href="/devfest-bdm-jigsaw-docs/EPISODE_3.html" class="active sidebar-link">Episode III - La revanche des Sith Maven</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/devfest-bdm-jigsaw-docs/EPISODE_3.html#devenir-un-seigneur-sith" class="sidebar-link">Devenir un seigneur Sith</a></li><li class="sidebar-sub-header"><a href="/devfest-bdm-jigsaw-docs/EPISODE_3.html#lancement-de-l-application-avec-java-11" class="sidebar-link">Lancement de l'application avec Java 11</a></li><li class="sidebar-sub-header"><a href="/devfest-bdm-jigsaw-docs/EPISODE_3.html#modularisation-de-l-application-maitriser-le-sabre" class="sidebar-link">Modularisation de l'application: maitriser le sabre</a></li><li class="sidebar-sub-header"><a href="/devfest-bdm-jigsaw-docs/EPISODE_3.html#modularisation-du-reste-de-l-application-maitriser-le-double-sabre" class="sidebar-link">Modularisation du reste de l'application: maitriser le double sabre</a></li><li class="sidebar-sub-header"><a href="/devfest-bdm-jigsaw-docs/EPISODE_3.html#modularisation-de-l-application-maitriser-la-telekinesie" class="sidebar-link">Modularisation de l'application: maitriser la télékinésie</a></li><li class="sidebar-sub-header"><a href="/devfest-bdm-jigsaw-docs/EPISODE_3.html#modularisation-de-l-application-maitriser-la-foudre" class="sidebar-link">Modularisation de l'application: maitriser la foudre</a></li></ul></li><li><a href="/devfest-bdm-jigsaw-docs/EPISODE_4.html" class="sidebar-link">Episode IV - Gradle, un Nouvel Espoir</a></li><li><a href="/devfest-bdm-jigsaw-docs/EPISODE_5.html" class="sidebar-link">Episode V - Yoda contre-attaque</a></li><li><a href="/devfest-bdm-jigsaw-docs/C3P0_HELP.html" class="sidebar-link">C3P0_H3LP</a></li></ul> </div> <div class="page"> <div class="content"><h1 id="episode-iii-la-revanche-des-sith-maven"><a href="#episode-iii-la-revanche-des-sith-maven" aria-hidden="true" class="header-anchor">#</a> Episode III - La revanche des Sith Maven</h1> <p><img src="/devfest-bdm-jigsaw-docs/assets/img/Darth_Maven.871afe41.jpg" alt="Darth Maven"></p> <p>Le côté obscure est très tentant et vous vous laissez séduire par les pouvoirs de modularisation de Maven, vous prenez alors le nom de <strong>Darth Jigsaw</strong>.</p> <h2 id="devenir-un-seigneur-sith"><a href="#devenir-un-seigneur-sith" aria-hidden="true" class="header-anchor">#</a> Devenir un seigneur Sith</h2> <p>Les Siths allant toujours par deux, vous allez à la rencontre de votre maître <strong>Darth Maven</strong>.</p> <div class="language- extra-class"><pre class="language-text"><code>cd hands-on-jigsaw-devfest/2-sith
</code></pre></div><p>Votre maître vous demande de modulariser une application, contenant toutes les personnes clés de la galaxie, fonctionnant sous <strong>Java 11</strong> pour la rendre compatible avec les modules de Java.</p> <p>L'application est composée de plusieurs modules <code>maven</code>:</p> <ul><li><code>api-starwars</code>: Le module de base contenant l'interface de définition et requêtage des personnages.</li> <li><code>api-starwars-local-impl</code>: L'implémentation in-memory de l'interface définie dans <code>api-starwars</code>.</li> <li><code>starwars-vertx-http-server</code>: Le server <code>Vertx</code> proposant une webapp et une API web utilisant <code>api-starwars-local-impl</code>.</li> <li><code>fuzzywuzzy</code>: <a href="https://github.com/xdrop/fuzzywuzzy" target="_blank" rel="noopener noreferrer">La librairie de Fuzzy Search<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> utilisée par <code>api-starwars-local-impl</code>.</li> <li><code>diffutils</code>: Le module nécessaire à <code>fuzzywuzzy</code> et regroupant différentes méthodes utiles au calcul de la distance de levenshtein.</li></ul> <p>Les interactions entre ces modules peuvent se représenter ainsi:</p> <p><img src="/devfest-bdm-jigsaw-docs/assets/img/dependency-graph.a856b5b3.png" alt="Dependency Graph"> <em>représentation des dépendances</em></p> <h3 id="gestion-des-dependances"><a href="#gestion-des-dependances" aria-hidden="true" class="header-anchor">#</a> Gestion des dépendances</h3> <p>En tant que Sith, votre outil de <code>build</code> est <a href="https://maven.apache.org/" target="_blank" rel="noopener noreferrer">Maven<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.
Si vous n'avez pas installé <code>maven</code>en version &gt;= 3.5, vous pouvez directement utiliser le script <code>mvnw</code> (ou <code>mvnw.bat</code>) à la racine du projet.</p> <p>L'intégration de Jigsaw au moment de la compilation est géré automatiquement par <code>maven</code> (il détecte la présence du fichier <code>module-info</code>)</p> <p><strong>C3P0_H3LP</strong></p> <blockquote><p>La version finale de l'application est déployée et disponible <a href="https://starwars.zenika.com" target="_blank" rel="noopener noreferrer">ici<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.
Si vous le désirez vous pouvez aussi utiliser l'image docker correspondante.</p></blockquote> <div class="language-sh extra-class"><pre class="language-text"><code>docker run -ti -p8090:8080 louiznk/sw-devfest:11-distroless
</code></pre></div><p>L'application démarrée dans <code>docker</code> est accessible <a href="http://localhost:8090" target="_blank" rel="noopener noreferrer">ici<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h2 id="lancement-de-l-application-avec-java-11"><a href="#lancement-de-l-application-avec-java-11" aria-hidden="true" class="header-anchor">#</a> Lancement de l'application avec Java 11</h2> <p>Importer dans votre IDE en tant que projet <code>maven</code> le dossier <code>2-sith</code> que vous avez récupéré pendant l'épisode I. Assurez-vous de bien utiliser un JDK 11 que ce soit dans votre IDE ou dans votre shell.</p> <p><strong>C3P0_H3LP</strong></p> <blockquote><p>Vous pouvez utiliser votre JAVA_HOME ou <code>sdkman</code> avec la commande <code>sdk use java &lt;YOUR_VERSION&gt;</code>.
Pour connaitre les versions que vous possédez dans <code>sdkman</code>, lancer la commande <code>sdk list java</code>.</p></blockquote> <p>Vérifier que votre projet s'installe correctement.</p> <div class="language-sh extra-class"><pre class="language-text"><code>./mvnw clean install
</code></pre></div><p>Lancer ensuite le serveur :</p> <div class="language-sh extra-class"><pre class="language-text"><code>cd starwars-vertx-http-server
./mvnw exec:java
</code></pre></div><p>Constater que l'application fonctionne correctement en ouvrant votre navigateur sur l'URL <a href="http://localhost:8080" target="_blank" rel="noopener noreferrer">http://localhost:8080<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> et notamment la page <a href="http://localhost:8080/infos" target="_blank" rel="noopener noreferrer">infos<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p> <p><strong>C3P0_H3LP</strong></p> <blockquote><p>Dans la page info, regarder les informations sur les modules (ou non).</p></blockquote> <h2 id="modularisation-de-l-application-maitriser-le-sabre"><a href="#modularisation-de-l-application-maitriser-le-sabre" aria-hidden="true" class="header-anchor">#</a> Modularisation de l'application: maitriser le sabre</h2> <p>Vous allez maintenant développer votre habileté en modularisant votre application.</p> <p>Commencer par modulariser <code>api-starwars</code>, <code>diff-utils</code> et <code>fuzzywuzzy</code>.</p> <p>Ajouter, pour ces modules, le fichier <code>module-info.java</code> dans les répertoires <code>&lt;DOSSIER&gt;/src/main/java</code>.</p> <p>Pour rappel les dépendances sont présentées dans le schéma <em>représentation des dépendances</em>.</p> <p>N'hésiter à vous appuyer sur <a href="/devfest-bdm-jigsaw-docs/C3P0_HELP.html">C3P0_H3LP</a> en cas de problème(s)!</p> <p>Vérifier que tout compile encore en lançant les tests depuis la racine du projet.</p> <div class="language-sh extra-class"><pre class="language-text"><code>./mvnw clean test
</code></pre></div><p>Les tests unitaires doivent aussi passer depuis votre IDE.</p> <h2 id="modularisation-du-reste-de-l-application-maitriser-le-double-sabre"><a href="#modularisation-du-reste-de-l-application-maitriser-le-double-sabre" aria-hidden="true" class="header-anchor">#</a> Modularisation du reste de l'application: maitriser le double sabre</h2> <p>Modulariser à présent le module <code>api-starwars-local-impl</code>. Attention cependant, en tant que Sith, le plugin <code>surefire</code> ne sait pas utiliser Jigsaw. Vos tests seront donc lancés avec le classpath classique.</p> <p><strong>C3P0_H3LP</strong></p> <blockquote><p>Attention! IntelliJ n'exécute pas les tests en utilisant les modules (tout comme maven-surefire).</p></blockquote> <h2 id="modularisation-de-l-application-maitriser-la-telekinesie"><a href="#modularisation-de-l-application-maitriser-la-telekinesie" aria-hidden="true" class="header-anchor">#</a> Modularisation de l'application: maitriser la télékinésie</h2> <p>Modulariser à présent le serveur HTTP <code>starwars-vertx-http-server</code>.</p> <p>Ce module doit:</p> <ul><li>permettre d'exposer les ressources statiques (fichier js, html, css, ...) de l'application web.</li> <li>utiliser l'implémentation de <code>org.zenika.handson.jigsaw.api.CharactersApi</code> (qui est fournit par le module <code>api-startwars-local-impl</code>).</li></ul> <p>Lancez le serveur web qui doit maintenant fonctionner en utilisant les modules.</p> <p>Vous pensez avoir réussi ? Non, le côté obscure choisit la facilité mais votre maitre vous remet à votre place jeune apprenti!</p> <p>Vous avez certes créé des modules mais vous ne les avez pas exécuté en tant que module. Voyer dans vos logs la marque du côté obscure.</p> <div class="language-log extra-class"><pre class="language-text"><code>WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by io.netty.util.internal.ReflectionUtil ...
WARNING: Please consider reporting this to the maintainers of io.netty.util.internal.ReflectionUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
</code></pre></div><p><img src="/devfest-bdm-jigsaw-docs/assets/img/module_name_null.14bca910.png" alt="Module Name Null"> <em>application lancé sans utiliser Jigsaw</em></p> <p>Vous êtes resté dans la voix du classpath. Pour aller plus loin vous devez exécuter votre application en tant que module Jigsaw.</p> <h2 id="modularisation-de-l-application-maitriser-la-foudre"><a href="#modularisation-de-l-application-maitriser-la-foudre" aria-hidden="true" class="header-anchor">#</a> Modularisation de l'application: maitriser la foudre</h2> <p>Faites en sorte que votre application démarre avec Jigsaw, pour cela modifier le fichier <code>./starwars-vertx-http-server/pom.xml</code></p> <p>Changer la configuration du plugin <code>exec-maven-plugin</code>. Remplacer <code>$$YOUR_MODULE_NAME$$</code> par le nom de votre module et <code>$$PATH_TO_YOUR_JAVA$$</code> par le chemin de votre exécutable java 11.</p> <div class="language-xml extra-class"><pre class="language-xml"><code>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugin</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.codehaus.mojo<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>exec-maven-plugin<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.6.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>executable</span><span class="token punctuation">&gt;</span></span>$$PATH_TO_YOUR_JAVA_EXE$$<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>executable</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>arguments</span><span class="token punctuation">&gt;</span></span>
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>argument</span><span class="token punctuation">&gt;</span></span>--module-path<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>argument</span><span class="token punctuation">&gt;</span></span>
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>modulepath</span><span class="token punctuation">/&gt;</span></span>
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>argument</span><span class="token punctuation">&gt;</span></span>--module<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>argument</span><span class="token punctuation">&gt;</span></span>
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>argument</span><span class="token punctuation">&gt;</span></span>$$YOUR_MODULE_NAME$$/org.zenika.handson.jigsaw.http.Application<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>argument</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>arguments</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugin</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>Puis à la racine du projet</p> <div class="language-sh extra-class"><pre class="language-text"><code>./mvnw install
cd starwars-vertx-http-server
./mvnw exec:exec
</code></pre></div><p>Vous devriez avoir l'erreur suivante :</p> <div class="language-error extra-class"><pre class="language-text"><code>Exception in thread &quot;main&quot; java.util.ServiceConfigurationError: org.zenika.handson.jigsaw.api.CharactersApi: module starwars.http.server does not declare `uses`
	at java.base/java.util.ServiceLoader.fail(ServiceLoader.java:588)
	at java.base/java.util.ServiceLoader.checkCaller(ServiceLoader.java:574)
	at java.base/java.util.ServiceLoader.&lt;init&gt;(ServiceLoader.java:503)
	at java.base/java.util.ServiceLoader.load(ServiceLoader.java:1691)
	at starwars.http.server/org.zenika.handson.jigsaw.http.Application.&lt;clinit&gt;(Application.java:47)
</code></pre></div><p>Il va falloir maintenant montrer la vraie maitrise de la force. Pour cela</p> <ul><li>indiquer que vous <strong>utilisez</strong> une implémentation de l'API (<code>api-starwars</code>)</li> <li>qui est <strong>fournie</strong> par l'implémentation (<code>api-starwars-local-impl</code>)</li> <li>vous devez aussi <strong>ouvrir</strong> les ressources images fournies par  (<code>api-starwars-local-impl</code>) pour quelles soient accessibles aux autres modules</li> <li>et enfin rendre disponible (c'est-à-dire ouvrir) <strong>toutes</strong> les ressources web exposées par Vert.x (dans <code>starwars-vertx-http-server</code>)</li></ul> <p>N'oublier que les <a href="/devfest-bdm-jigsaw-docs/C3P0_HELP.html">archives de votre droïde</a> sont d'une aide précieuses.</p> <p>Pourquoi doit-on ouvrir les ressources que l'on partager ? car par défaut ces ressources sont &quot;protégées&quot;.</p> <p><strong>C3P0_H3LP</strong></p> <blockquote><p>Il y a notamment quelques précisions dans la javadoc suivante.</p></blockquote> <div class="language- extra-class"><pre class="language-text"><code>https://docs.oracle.com/javase/9/docs/api/java/lang/Module.html#getResourceAsStream-java.lang.String-

...
A resource in a named module may be encapsulated so that it cannot be located by code in other modules. Whether a resource can be located or not is determined as follows:

 * If the resource name ends with &quot;.class&quot; then it is not encapsulated.
 * A package name is derived from the resource name. If the package name is a package in the module then the resource can only be located by the caller of this method when the package is open to at least the caller's module. If the resource is not in a package in the module then the resource is not encapsulated.
...
</code></pre></div><p><strong>Bravo vous avez réussi à modulariser votre première application en utilisant les modules Java!</strong></p> <p>Malheureusement, vous réalisez que votre maître <strong>Darth Maven</strong> vous a caché des choses! A cause de <code>surefire</code>, vos tests sont toujours exécutés en mode classpath !!!
La maîtrise de Jigsaw par maven ne sera jamais complète!</p> <blockquote><p>Pour en savoir plus, rendez vous <a href="/devfest-bdm-jigsaw-docs/EPISODE_4.html">à l'épisode suivant</a>.</p></blockquote></div> <div class="page-edit"><!----> <!----></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/devfest-bdm-jigsaw-docs/EPISODE_2.html" class="prev">
          Episode II - Le guerre du Hello World
        </a></span> <span class="next"><a href="/devfest-bdm-jigsaw-docs/EPISODE_4.html">
          Episode IV - Gradle, un Nouvel Espoir
        </a>
        →
      </span></p></div> </div> <!----></div></div>
    <script src="/devfest-bdm-jigsaw-docs/assets/js/7.bf2f6254.js" defer></script><script src="/devfest-bdm-jigsaw-docs/assets/js/app.cd2565ce.js" defer></script>
  </body>
</html>
