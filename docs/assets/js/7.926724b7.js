(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{167:function(t,s,e){t.exports=e.p+"assets/img/master_gradle.62725ee3.jpg"},168:function(t,s,e){t.exports=e.p+"assets/img/module_name_completed.512570ec.png"},179:function(t,s,e){"use strict";e.r(s);var a=[function(){var t=this.$createElement,s=this._self._c||t;return s("h1",{attrs:{id:"episode-iv-gradle-un-nouvel-espoir"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#episode-iv-gradle-un-nouvel-espoir","aria-hidden":"true"}},[this._v("#")]),this._v(" Episode IV - Gradle, un Nouvel Espoir")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("img",{attrs:{src:e(167),alt:"Master Gradle"}})])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("Vous vous rendez compte de la surpercherie de votre maître et suite à un combat épique contre lui, vous êtes sauvé par "),s("strong",[this._v("Master Gradle")]),this._v(", le Jedi légendaire.")])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[this._v("cd hands-on-jigsaw-devfest/66-jedi\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"suivre-le-chemin-des-jedi-configurer-gradle"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#suivre-le-chemin-des-jedi-configurer-gradle","aria-hidden":"true"}},[this._v("#")]),this._v(" Suivre le chemin des Jedi: configurer Gradle")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("Contrairement à Maven, avec Gradle, vous devez configurer les étapes de build et de run pour intégrer les modules. Bien que le côté obscure possède de nombreuses tentations qui permettent d'abstraire cette configuration (comme le plugin "),s("code",[this._v("chainsaw")]),this._v("), ceux-ci sont loin d'être stables.")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("Ajoutez dans l'ensemble des définitions de build gradle (fichiers "),s("code",[this._v("$$repertoire_du_module$$\\build.gradle")]),this._v(") des modules une "),s("code",[this._v("ExtraPropertyExtension")]),this._v(" qui aura le nom de votre module (voir exemple). Cette propriété sera utilisée lors les builds Gradle pour identifier votre module.")])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language-groovy extra-class"},[s("pre",{pre:!0,attrs:{class:"language-groovy"}},[s("code",[this._v("ext"),s("span",{attrs:{class:"token operator"}},[this._v(".")]),this._v("moduleName "),s("span",{attrs:{class:"token operator"}},[this._v("=")]),this._v(" "),s("span",{attrs:{class:"token string gstring"}},[this._v('"my.module"')]),this._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("Une fois que cela est fait, il faut modifier le fichier "),s("code",[this._v("build.gradle")]),this._v(" racine pour configurer Gradle avec nos modules.")])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("ul",[e("li",[t._v("Ajoutez un hook sur la tâche "),e("code",[t._v("compileJava")]),t._v(" pour ajouter dans l'argument "),e("code",[t._v("--module-path")]),t._v(" les valeurs retournées par "),e("code",[t._v("classpath.asPath")]),t._v(".")]),t._v(" "),e("li",[t._v("Ajoutez un hook sur la tâche "),e("code",[t._v("compileTestJava")]),t._v(" pour configurer "),e("code",[t._v("javac")]),t._v(" avec les arguments "),e("code",[t._v("--module-path")]),t._v(", "),e("code",[t._v("--add-module")]),t._v(", "),e("code",[t._v("--add-reads")]),t._v(", "),e("code",[t._v("--patch-module")]),t._v(".")]),t._v(" "),e("li",[t._v("Ajoutez un hook sur la tâche "),e("code",[t._v("test")]),t._v(" pour configurer "),e("code",[t._v("javac")]),t._v(" avec les arguments "),e("code",[t._v("--module-path")]),t._v(", "),e("code",[t._v("--add-module")]),t._v(", "),e("code",[t._v("--add-reads")]),t._v(", "),e("code",[t._v("--patch-module")]),t._v(".")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("blockquote",[s("p",[s("code",[this._v("classpath.asPath")]),this._v(" retourne le classpath tel que calculé en fonction des dépendences définies dans le projet gradle.")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("strong",[this._v("starwars-vertx-http-server/build.gradle")])])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("ul",[e("li",[t._v("Ajoutez un hook sur la tâche "),e("code",[t._v("run")]),t._v(" pour ajouter les arguments jvm "),e("code",[t._v("--modulePath")]),t._v(" et "),e("code",[t._v("--module")]),t._v(".")]),t._v(" "),e("li",[t._v("Ajoutez un hook sur la tâche "),e("code",[t._v("startScripts")]),t._v(" avec le contenu suivant.")])])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"language-groovy extra-class"},[e("pre",{pre:!0,attrs:{class:"language-groovy"}},[e("code",[e("span",{attrs:{class:"token keyword"}},[t._v("import")]),t._v(" java"),e("span",{attrs:{class:"token operator"}},[t._v(".")]),t._v("util"),e("span",{attrs:{class:"token operator"}},[t._v(".")]),t._v("regex"),e("span",{attrs:{class:"token operator"}},[t._v(".")]),t._v("Matcher "),e("span",{attrs:{class:"token comment"}},[t._v("// Matcher is use for replacing args in batchs files")]),t._v("\n"),e("span",{attrs:{class:"token punctuation"}},[t._v("...")]),t._v("\n\nstartScripts "),e("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    inputs"),e("span",{attrs:{class:"token operator"}},[t._v(".")]),e("span",{attrs:{class:"token function"}},[t._v("property")]),e("span",{attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{attrs:{class:"token string gstring"}},[t._v('"moduleName"')]),e("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" moduleName"),e("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    doFirst "),e("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        classpath "),e("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{attrs:{class:"token function"}},[t._v("files")]),e("span",{attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        defaultJvmOpts "),e("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n                "),e("span",{attrs:{class:"token string"}},[t._v("'--module-path'")]),e("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{attrs:{class:"token string"}},[t._v("'APP_HOME_LIBS'")]),e("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{attrs:{class:"token comment"}},[t._v("// Multi plateform replace in doLast")]),t._v("\n                "),e("span",{attrs:{class:"token string"}},[t._v("'-Dport=8080'")]),e("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{attrs:{class:"token string"}},[t._v("'-Ddev=false'")]),e("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                "),e("span",{attrs:{class:"token string"}},[t._v("'--module'")]),e("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" mainClassName\n        "),e("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    "),e("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    doLast"),e("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),e("span",{attrs:{class:"token keyword"}},[t._v("def")]),t._v(" bashFile "),e("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),e("span",{attrs:{class:"token class-name"}},[t._v("File")]),e("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("outputDir"),e("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" applicationName"),e("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        String bashContent "),e("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" bashFile"),e("span",{attrs:{class:"token operator"}},[t._v(".")]),t._v("text\n        bashFile"),e("span",{attrs:{class:"token operator"}},[t._v(".")]),t._v("text "),e("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" bashContent"),e("span",{attrs:{class:"token operator"}},[t._v(".")]),e("span",{attrs:{class:"token function"}},[t._v("replaceFirst")]),e("span",{attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{attrs:{class:"token string"}},[t._v("'APP_HOME_LIBS'")]),e("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" Matcher"),e("span",{attrs:{class:"token operator"}},[t._v(".")]),e("span",{attrs:{class:"token function"}},[t._v("quoteReplacement")]),e("span",{attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{attrs:{class:"token string"}},[t._v("'$APP_HOME/lib'")]),e("span",{attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n        "),e("span",{attrs:{class:"token keyword"}},[t._v("def")]),t._v(" batFile "),e("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),e("span",{attrs:{class:"token class-name"}},[t._v("File")]),e("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("outputDir"),e("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" applicationName "),e("span",{attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),e("span",{attrs:{class:"token string gstring"}},[t._v('".bat"')]),e("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        String batContent "),e("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" batFile"),e("span",{attrs:{class:"token operator"}},[t._v(".")]),t._v("text\n        batFile"),e("span",{attrs:{class:"token operator"}},[t._v(".")]),t._v("text "),e("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" batContent"),e("span",{attrs:{class:"token operator"}},[t._v(".")]),e("span",{attrs:{class:"token function"}},[t._v("replaceFirst")]),e("span",{attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{attrs:{class:"token string"}},[t._v("'APP_HOME_LIBS'")]),e("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" Matcher"),e("span",{attrs:{class:"token operator"}},[t._v(".")]),e("span",{attrs:{class:"token function"}},[t._v("quoteReplacement")]),e("span",{attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{attrs:{class:"token string"}},[t._v("'%APP_HOME%\\\\lib'")]),e("span",{attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),e("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),e("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[this._v("./gradlew run\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("img",{attrs:{src:e(168),alt:"Module Name Null"}}),this._v(" "),s("em",[this._v("application lancé avec utiliser Jigsaw")])])}],n=e(0),r=Object(n.a)({},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"content"},[t._m(0),t._v(" "),t._m(1),t._v(" "),t._m(2),t._v(" "),e("p",[t._v("Vous le suivez et devenez son Padawan pour sortir du côté obscure de la Force.")]),t._v(" "),t._m(3),t._m(4),t._v(" "),t._m(5),t._v(" "),t._m(6),t._v(" "),t._m(7),t._m(8),t._v(" "),t._m(9),t._v(" "),t._m(10),t._v(" "),e("p",[t._v("Encore une fois n'hésitez à vous appuyer sur les "),e("router-link",{attrs:{to:"./TIPS.html"}},[t._v("archives de votre droïde")]),t._v(" en cas de problème(s)!")],1),t._v(" "),t._m(11),t._v(" "),t._m(12),t._v(" "),t._m(13),e("p",[t._v("Buildez et lancez votre serveur, qui doit fonctionner comme avant!")]),t._v(" "),t._m(14),e("p",[t._v("Si vous vous connectez à l'application et regardez la page informations, vous devriez avoir cela :")]),t._v(" "),t._m(15),t._v(" "),e("blockquote",[e("p",[t._v("Bravo vous avez réussi à utiliser la force sans le côté obscure. Il est maintenant temps pour vous de devenir un maître Jedi! Si la force est avec vous, rendez-vous dans "),e("router-link",{attrs:{to:"./EPISODE_5.html"}},[t._v("l'épisode suivant")]),t._v(".")],1)])])},a,!1,null,null,null);r.options.__file="EPISODE_4.md";s.default=r.exports}}]);